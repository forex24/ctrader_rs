# 认证

## 应用级别认证

客户 -> 1:n -> 账户

ApplicationAuth认证的是客户
AccessToken可以返回账户列表

## 账户级别认证

访问账户必须要AccessToken

## 事件
ProtoOAClientDisconnectEvent  // 服务关闭客户连接事件
ProtoOAAccountsTokenInvalidatedEvent // 账户级别AccessToken失效，需要RefreshTokenReq

## Version

不需要任何认证就可以请求


# 订单及执行

## 订单
ProtoOANewOrderReq
ProtoOACancelOrderReq
ProtoOAAmendOrderReq   // 修改订单

ProtoOAOrderErrorEvent

## 执行事件
ProtoOAExecutionEvent


## 跟踪止损
ProtoOATrailingSLChangedEvent


## 仓位管理
ProtoOAClosePositionReq
ProtoOAAmendPositionSLTPReq

# 资产&Symbol
ProtoOAAssetClassListReq
ProtoOAAssetListReq
ProtoOASymbolsListReq   // Symbol简单描述
ProtoOASymbolByIdReq    // symbol详细信息

ProtoOASymbolChangedEvent

# PNL
ProtoOASymbolsForConversionReq


# 账户相关
ProtoOATraderReq
ProtoOATraderUpdatedEvent

# Open Position & pending Order
ProtoOAReconcileReq


```proto
enum ProtoOAPayloadType {
    # Application认证
    PROTO_OA_APPLICATION_AUTH_REQ = 2100;
    PROTO_OA_APPLICATION_AUTH_RES = 2101;
    # 账户认证
    PROTO_OA_ACCOUNT_AUTH_REQ = 2102;
    PROTO_OA_ACCOUNT_AUTH_RES = 2103;
    # 版本
    PROTO_OA_VERSION_REQ = 2104;
    PROTO_OA_VERSION_RES = 2105;
    # Order
    PROTO_OA_NEW_ORDER_REQ = 2106;
    PROTO_OA_TRAILING_SL_CHANGED_EVENT = 2107;
    PROTO_OA_CANCEL_ORDER_REQ = 2108;
    PROTO_OA_AMEND_ORDER_REQ = 2109;
    PROTO_OA_AMEND_POSITION_SLTP_REQ = 2110;
    PROTO_OA_CLOSE_POSITION_REQ = 2111;

    # Symbol管理
    PROTO_OA_ASSET_LIST_REQ = 2112;
    PROTO_OA_ASSET_LIST_RES = 2113;
    PROTO_OA_SYMBOLS_LIST_REQ = 2114;
    PROTO_OA_SYMBOLS_LIST_RES = 2115;
    PROTO_OA_SYMBOL_BY_ID_REQ = 2116;
    PROTO_OA_SYMBOL_BY_ID_RES = 2117;
    PROTO_OA_SYMBOLS_FOR_CONVERSION_REQ = 2118;
    PROTO_OA_SYMBOLS_FOR_CONVERSION_RES = 2119;
    PROTO_OA_SYMBOL_CHANGED_EVENT = 2120;

    #账户管理
    PROTO_OA_TRADER_REQ = 2121;
    PROTO_OA_TRADER_RES = 2122;
    PROTO_OA_TRADER_UPDATE_EVENT = 2123;

    # Open Position & Pending Order
    PROTO_OA_RECONCILE_REQ = 2124;
    PROTO_OA_RECONCILE_RES = 2125;
    PROTO_OA_EXECUTION_EVENT = 2126;

    # 市场数据管理
    PROTO_OA_SUBSCRIBE_SPOTS_REQ = 2127;
    PROTO_OA_SUBSCRIBE_SPOTS_RES = 2128;
    PROTO_OA_UNSUBSCRIBE_SPOTS_REQ = 2129;
    PROTO_OA_UNSUBSCRIBE_SPOTS_RES = 2130;
    PROTO_OA_SPOT_EVENT = 2131;

    # Order执行
    PROTO_OA_ORDER_ERROR_EVENT = 2132;

    # 市场数据
    PROTO_OA_SUBSCRIBE_LIVE_TRENDBAR_REQ = 2135;
    PROTO_OA_UNSUBSCRIBE_LIVE_TRENDBAR_REQ = 2136;

    #Bar历史数据
    PROTO_OA_GET_TRENDBARS_REQ = 2137;
    PROTO_OA_GET_TRENDBARS_RES = 2138;

    # Margin 估算
    PROTO_OA_EXPECTED_MARGIN_REQ = 2139;
    PROTO_OA_EXPECTED_MARGIN_RES = 2140;
    PROTO_OA_MARGIN_CHANGED_EVENT = 2141;

    # 错误
    PROTO_OA_ERROR_RES = 2142;

    # 历史CashFlow
    PROTO_OA_CASH_FLOW_HISTORY_LIST_REQ = 2143;
    PROTO_OA_CASH_FLOW_HISTORY_LIST_RES = 2144;

    # 历史Tick获取
    PROTO_OA_GET_TICKDATA_REQ = 2145;
    PROTO_OA_GET_TICKDATA_RES = 2146;

    # AccountToken
    PROTO_OA_ACCOUNTS_TOKEN_INVALIDATED_EVENT = 2147;
    PROTO_OA_CLIENT_DISCONNECT_EVENT = 2148;

    # 账户列表
    PROTO_OA_GET_ACCOUNTS_BY_ACCESS_TOKEN_REQ = 2149;
    PROTO_OA_GET_ACCOUNTS_BY_ACCESS_TOKEN_RES = 2150;

    # 交易者资料
    PROTO_OA_GET_CTID_PROFILE_BY_TOKEN_REQ = 2151;
    PROTO_OA_GET_CTID_PROFILE_BY_TOKEN_RES = 2152;

    # 资产信息
    PROTO_OA_ASSET_CLASS_LIST_REQ = 2153;
    PROTO_OA_ASSET_CLASS_LIST_RES = 2154;

    # 市场深度数据 Live
    PROTO_OA_DEPTH_EVENT = 2155;
    PROTO_OA_SUBSCRIBE_DEPTH_QUOTES_REQ = 2156;
    PROTO_OA_SUBSCRIBE_DEPTH_QUOTES_RES = 2157;
    PROTO_OA_UNSUBSCRIBE_DEPTH_QUOTES_REQ = 2158;
    PROTO_OA_UNSUBSCRIBE_DEPTH_QUOTES_RES = 2159;

    # Symbol Category
    PROTO_OA_SYMBOL_CATEGORY_REQ = 2160;
    PROTO_OA_SYMBOL_CATEGORY_RES = 2161;

    # 账户退出
    PROTO_OA_ACCOUNT_LOGOUT_REQ = 2162;
    PROTO_OA_ACCOUNT_LOGOUT_RES = 2163;
    PROTO_OA_ACCOUNT_DISCONNECT_EVENT = 2164;

    # 获取实时Bar
    PROTO_OA_SUBSCRIBE_LIVE_TRENDBAR_RES = 2165;
    PROTO_OA_UNSUBSCRIBE_LIVE_TRENDBAR_RES = 2166;

    # MarginCall
    PROTO_OA_MARGIN_CALL_LIST_REQ = 2167;
    PROTO_OA_MARGIN_CALL_LIST_RES = 2168;
    PROTO_OA_MARGIN_CALL_UPDATE_REQ = 2169;
    PROTO_OA_MARGIN_CALL_UPDATE_RES = 2170;
    PROTO_OA_MARGIN_CALL_UPDATE_EVENT = 2171;
    PROTO_OA_MARGIN_CALL_TRIGGER_EVENT = 2172;

    # RefreshToken
    PROTO_OA_REFRESH_TOKEN_REQ = 2173;
    PROTO_OA_REFRESH_TOKEN_RES = 2174;

    # 获取历史订单心底
    PROTO_OA_ORDER_LIST_REQ = 2175;
    PROTO_OA_ORDER_LIST_RES = 2176;

    # 杠杆相关
    PROTO_OA_GET_DYNAMIC_LEVERAGE_REQ = 2177;
    PROTO_OA_GET_DYNAMIC_LEVERAGE_RES = 2178;

    # 获取仓位相关的交易
    PROTO_OA_DEAL_LIST_BY_POSITION_ID_REQ = 2179;
    PROTO_OA_DEAL_LIST_BY_POSITION_ID_RES = 2180;

    # 获取订单细节
    PROTO_OA_ORDER_DETAILS_REQ = 2181;
    PROTO_OA_ORDER_DETAILS_RES = 2182;

    # 获取仓位相关的订单列表
    PROTO_OA_ORDER_LIST_BY_POSITION_ID_REQ = 2183;
    PROTO_OA_ORDER_LIST_BY_POSITION_ID_RES = 2184;

    # 。。。
    PROTO_OA_DEAL_OFFSET_LIST_REQ = 2185;
    PROTO_OA_DEAL_OFFSET_LIST_RES = 2186;

    # 获取仓位收益
    PROTO_OA_GET_POSITION_UNREALIZED_PNL_REQ = 2187;
    PROTO_OA_GET_POSITION_UNREALIZED_PNL_RES = 2188;
}
```

```proto
enum ProtoOAPayloadType {
    # Order
    PROTO_OA_NEW_ORDER_REQ = 2106;
    PROTO_OA_TRAILING_SL_CHANGED_EVENT = 2107;
    PROTO_OA_CANCEL_ORDER_REQ = 2108;
    PROTO_OA_AMEND_ORDER_REQ = 2109;
    PROTO_OA_AMEND_POSITION_SLTP_REQ = 2110;
    PROTO_OA_CLOSE_POSITION_REQ = 2111;


    # Open Position & Pending Order
    PROTO_OA_RECONCILE_REQ = 2124;
    PROTO_OA_RECONCILE_RES = 2125;
    PROTO_OA_EXECUTION_EVENT = 2126;

    # Order执行
    PROTO_OA_ORDER_ERROR_EVENT = 2132;

    # Margin 估算
    PROTO_OA_EXPECTED_MARGIN_REQ = 2139;
    PROTO_OA_EXPECTED_MARGIN_RES = 2140;
    PROTO_OA_MARGIN_CHANGED_EVENT = 2141;


    # MarginCall
    PROTO_OA_MARGIN_CALL_LIST_REQ = 2167;
    PROTO_OA_MARGIN_CALL_LIST_RES = 2168;
    PROTO_OA_MARGIN_CALL_UPDATE_REQ = 2169;
    PROTO_OA_MARGIN_CALL_UPDATE_RES = 2170;
    PROTO_OA_MARGIN_CALL_UPDATE_EVENT = 2171;
    PROTO_OA_MARGIN_CALL_TRIGGER_EVENT = 2172;


    # 杠杆相关
    PROTO_OA_GET_DYNAMIC_LEVERAGE_REQ = 2177;
    PROTO_OA_GET_DYNAMIC_LEVERAGE_RES = 2178;

    # 获取仓位相关的交易
    PROTO_OA_DEAL_LIST_BY_POSITION_ID_REQ = 2179;
    PROTO_OA_DEAL_LIST_BY_POSITION_ID_RES = 2180;

    # 获取订单细节
    PROTO_OA_ORDER_DETAILS_REQ = 2181;
    PROTO_OA_ORDER_DETAILS_RES = 2182;

    # 获取仓位相关的订单列表
    PROTO_OA_ORDER_LIST_BY_POSITION_ID_REQ = 2183;
    PROTO_OA_ORDER_LIST_BY_POSITION_ID_RES = 2184;

    # 。。。
    PROTO_OA_DEAL_OFFSET_LIST_REQ = 2185;
    PROTO_OA_DEAL_OFFSET_LIST_RES = 2186;

    # PNL相关
    PROTO_OA_SYMBOLS_FOR_CONVERSION_REQ = 2118;
    PROTO_OA_SYMBOLS_FOR_CONVERSION_RES = 2119;


    # 获取仓位收益
    PROTO_OA_GET_POSITION_UNREALIZED_PNL_REQ = 2187;
    PROTO_OA_GET_POSITION_UNREALIZED_PNL_RES = 2188;
}
```

```proto
enum SymbolRelate {
    # Symbol相关
    # Symbol管理
    PROTO_OA_ASSET_LIST_REQ = 2112;
    PROTO_OA_ASSET_LIST_RES = 2113;
    PROTO_OA_SYMBOLS_LIST_REQ = 2114;
    PROTO_OA_SYMBOLS_LIST_RES = 2115;
    PROTO_OA_SYMBOL_BY_ID_REQ = 2116;
    PROTO_OA_SYMBOL_BY_ID_RES = 2117;
    PROTO_OA_SYMBOL_CHANGED_EVENT = 2120;

    # 资产信息
    PROTO_OA_ASSET_CLASS_LIST_REQ = 2153;
    PROTO_OA_ASSET_CLASS_LIST_RES = 2154;

    # Symbol Category
    PROTO_OA_SYMBOL_CATEGORY_REQ = 2160;
    PROTO_OA_SYMBOL_CATEGORY_RES = 2161;
}
```


```proto
enum Application_ {
    # Application认证
    PROTO_OA_APPLICATION_AUTH_REQ = 2100;
    PROTO_OA_APPLICATION_AUTH_RES = 2101;
    # 账户认证
    PROTO_OA_ACCOUNT_AUTH_REQ = 2102;
    PROTO_OA_ACCOUNT_AUTH_RES = 2103;
    # 版本
    PROTO_OA_VERSION_REQ = 2104;
    PROTO_OA_VERSION_RES = 2105;
    # 交易者资料
    PROTO_OA_GET_CTID_PROFILE_BY_TOKEN_REQ = 2151;
    PROTO_OA_GET_CTID_PROFILE_BY_TOKEN_RES = 2152;
        # 账户列表
    PROTO_OA_GET_ACCOUNTS_BY_ACCESS_TOKEN_REQ = 2149;
    PROTO_OA_GET_ACCOUNTS_BY_ACCESS_TOKEN_RES = 2150;
        # AccountToken
    PROTO_OA_ACCOUNTS_TOKEN_INVALIDATED_EVENT = 2147;
    PROTO_OA_CLIENT_DISCONNECT_EVENT = 2148;
    # RefreshToken
    PROTO_OA_REFRESH_TOKEN_REQ = 2173;
    PROTO_OA_REFRESH_TOKEN_RES = 2174;
        # 账户退出
    PROTO_OA_ACCOUNT_LOGOUT_REQ = 2162;
    PROTO_OA_ACCOUNT_LOGOUT_RES = 2163;
    PROTO_OA_ACCOUNT_DISCONNECT_EVENT = 2164;

       # 错误
    PROTO_OA_ERROR_RES = 2142;
}
```

```proto
enum Account {
        #账户管理
    PROTO_OA_TRADER_REQ = 2121;
    PROTO_OA_TRADER_RES = 2122;
    PROTO_OA_TRADER_UPDATE_EVENT = 2123;
}

```proto
enum Historical {

    #Bar历史数据
    PROTO_OA_GET_TRENDBARS_REQ = 2137;
    PROTO_OA_GET_TRENDBARS_RES = 2138;
    # 历史Tick获取
    PROTO_OA_GET_TICKDATA_REQ = 2145;
    PROTO_OA_GET_TICKDATA_RES = 2146;
    # 历史CashFlow
    PROTO_OA_CASH_FLOW_HISTORY_LIST_REQ = 2143;
    PROTO_OA_CASH_FLOW_HISTORY_LIST_RES = 2144;
    # 历史转账信息
    PROTO_OA_DEAL_LIST_REQ = 2133;
    PROTO_OA_DEAL_LIST_RES = 2134;
    # 获取历史订单心底
    PROTO_OA_ORDER_LIST_REQ = 2175;
    PROTO_OA_ORDER_LIST_RES = 2176;
}
```

```proto
enum Live {

    # 市场实时数据订阅
    PROTO_OA_SUBSCRIBE_SPOTS_REQ = 2127;
    PROTO_OA_SUBSCRIBE_SPOTS_RES = 2128;
    PROTO_OA_UNSUBSCRIBE_SPOTS_REQ = 2129;
    PROTO_OA_UNSUBSCRIBE_SPOTS_RES = 2130;
    PROTO_OA_SPOT_EVENT = 2131;
    # 获取实时Bar
    PROTO_OA_SUBSCRIBE_LIVE_TRENDBAR_REQ = 2135;
    PROTO_OA_UNSUBSCRIBE_LIVE_TRENDBAR_REQ = 2136;
    PROTO_OA_SUBSCRIBE_LIVE_TRENDBAR_RES = 2165;
    PROTO_OA_UNSUBSCRIBE_LIVE_TRENDBAR_RES = 2166;
    # 市场深度数据 Live
    PROTO_OA_DEPTH_EVENT = 2155;
    PROTO_OA_SUBSCRIBE_DEPTH_QUOTES_REQ = 2156;
    PROTO_OA_SUBSCRIBE_DEPTH_QUOTES_RES = 2157;
    PROTO_OA_UNSUBSCRIBE_DEPTH_QUOTES_REQ = 2158;
    PROTO_OA_UNSUBSCRIBE_DEPTH_QUOTES_RES = 2159;

}
```